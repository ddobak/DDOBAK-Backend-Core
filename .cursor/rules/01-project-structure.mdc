---
description: Spring Boot 프로젝트 패키지 구조, 도메인별 계층 분리, Clean Architecture 설계 원칙과 명명 규칙을 제공합니다.
globs: 
alwaysApply: false
---
# 📦 Spring Boot 프로젝트 구조 규칙

## 🎯 핵심 원칙
- **Java 17**, **Spring Boot 3.5.0** 고정 (절대 버전 변경 금지)
- **Clean Code & Clean Architecture** 원칙 준수
- **도메인별 완전한 계층 분리** (controller, service, dto, entity, repository)
- **설정 관리**: `application.yml` 사용, 환경별 분리 (.env 보완)

## 📁 필수 디렉터리 구조

```
src/main/java/com/sbpb/ddobak/server/
├── config/                       # 전역 설정
│   ├── SecurityConfig.java       # Spring Security 설정
│   ├── SwaggerConfig.java        # API 문서 설정
│   ├── RedisConfig.java          # Redis 연결 설정
│   ├── SQSConfig.java            # AWS SQS 설정
│   └── S3Config.java             # AWS S3 설정
│
├── domain/                       # 도메인별 모듈
│   ├── user/                     # 사용자 도메인
│   │   ├── controller/
│   │   ├── service/
│   │   ├── dto/
│   │   ├── entity/
│   │   └── repository/
│   ├── auth/                     # 인증 도메인
│   │   ├── controller/
│   │   ├── service/
│   │   ├── dto/
│   │   ├── entity/
│   │   ├── repository/
│   │   └── oauth/               # 소셜 로그인 클라이언트
│   ├── documentProcess/         # 문서 처리 도메인
│   └── externalContent/         # 외부 컨텐츠 도메인
│
├── common/                      # 공통 모듈
│   ├── exception/               # 예외 처리
│   ├── response/                # 공통 응답 형식
│   └── utils/                   # 유틸리티
│
└── ServerApplication.java       # 메인 클래스
```

## 🔄 계층별 역할 정의

### Controller 계층
- `@RestController` 사용
- API 진입점 역할
- 요청 검증 (`@Valid`)
- 응답 형식 통일 (`ApiResponse<T>`)

### Service 계층
- 비즈니스 로직 처리
- `@Transactional` 적절한 사용
- 의존성 주입을 통한 느슨한 결합

### Repository 계층
- `JpaRepository<Entity, ID>` 상속
- 커스텀 쿼리는 QueryDSL 또는 `@Query` 사용

### Entity 계층
- JPA 엔티티 정의
- 비즈니스 메서드 포함 가능
- DTO 변환은 별도 메서드로 분리

### DTO 계층
- 계층 간 데이터 전달
- `Request`, `Response` 접미사 사용
- Lombok 적극 활용 (`@Builder`, `@Getter` 등)

## 📋 명명 규칙

### 파일 명명
- Controller: `{Domain}Controller.java`
- Service: `{Domain}Service.java`
- Repository: `{Domain}Repository.java`
- Entity: `{Domain}.java` (단수형)
- DTO: `{Purpose}Request.java`, `{Purpose}Response.java`

### 패키지 명명
- 소문자, camelCase 사용
- 도메인명은 단수형 사용 (user, auth)

## 🚫 금지 사항
- **Java 17 또는 Spring Boot 3.5.0 버전 변경 절대 금지**
- Entity를 Controller에서 직접 노출 금지
- 순환 의존성 생성 금지
- 도메인 간 직접 의존성 금지 (common을 통한 간접 참조만 허용)
